#! /bin/bash

# install the dot files

export PATH=/bin:/sbin:/usr/bin:/usr/local/bin:/usr/sbin

echo "installing dotfiles...."

# make it idempotent!!!

# function to ask: replace [y/n]? 
cprpl () {
  src=$1
  dst=$2
  if [ -e $dst ] ; then
    echo "$dst already exists...replace it?"
    read -r -p "[y/n] " response
    if [[ $response =~ ^([yY][eE][sS]|[yY])$ ]] ; then
      rm -f $dst     # note: dst needs to be full path, not just dir/.
      cp $src $dst
    else
      echo "ok...leaving $dst as is..."
    fi
  else
    cp $src $dst
  fi 
}

# bash
cprpl bash_aliases ~/.bash_aliases

# zsh stuff
# check if ~/.oh-my-zsh already exists...
if [ ! -e ${HOME}/.oh-my-zsh ] ; then
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
fi
cprpl zshrc ~/.zshrc
if [ ! -e ${HOME}/.oh-my-zsh/custom/plugins/zsh-autosuggestions ] ; then
  git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
fi
cprpl jkblinks.zsh-theme ~/.oh-my-zsh/themes/jkblinks.zsh-theme
if [ ${SHELL} != "/usr/bin/zsh"] ; then
  chsh -s /usr/bin/zsh
fi

# python
cprpl pythonrc ~/.pythonrc

# mutt
if [ ! -e ${HOME}/mdir/tmp ] ; then
  mkdir -p ~/mdir/tmp
fi
cprpl muttrc ~/.muttrc

# ssh auth keys file
if [ ! -e ${HOME}/.ssh ] ; then
  mkdir ${HOME}/.ssh
fi
cprpl authorized_keys ${HOME}/.ssh/authorized_keys

stuff="zsh zsh-syntax-highlighting tmux screen rsync git "\
"ssh-askpass vim mutt vim enscript"
# vundle???
#  git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim

echo "============================================="
echo "stuff you probably want installed:"
echo $stuff
echo "============================================="
echo ">> sudo apt-get install $stuff"
echo "============================================="
echo "also might want i3?"
echo ">> sudo apt-get install i3"
echo "============================================="
